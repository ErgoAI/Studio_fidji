<!DOCTYPE HTML>
<!-- DO NOT edit this file if you wish your changes to persist!!! 
 Edit the template in com.declarativa.fiji.reporting instead, and rebuild Prolog Studio
 Used by Java class com.declarativa.fiji.reporting.VisjsUtils
  -->
<html>
<head>
  <title>$TITLE$</title>

  <script src="file://$VISJSBASE$vis.min.js"></script>
  <link href="file://$VISJSBASE$vis.min.css" rel="stylesheet" type="text/css" />
  <style type="text/css">
    body, html {
      font-family: sans-serif;
    }
    .vis-item .vis-item-overflow {
      overflow: visible;
    }
  </style>
</head>
<body>

<p>
  $SUBTITLE$
</p>

<div id="visualization"></div>
<p></p><div id="log"></div>

<script type="text/javascript">
  // DOM element where the Timeline will be attached
  var container = document.getElementById('visualization');
  // Times (cycles, states) are milliseconds since the epoch; vis accepts numbers as precisely that
  // If the above overflow policy gets ugly, use title:'tooltip' in items
  // For better selection you might combine colors below with .vis-item.vis-selected (?)
  // background items may be used to show time ranges!
  // id necessary for handling events, keep it strictly sync'ed with array order
  var json_payload = $JSON_PAYLOAD$ ;
  var items = json_payload['items'];
  var groups =  json_payload['groups'];

  var minTime = Number.MAX_VALUE;
  var maxTime = Number.MIN_VALUE;
  
  for(i=0; i<items.length; i++){
  	if(items[i].start<minTime)
  		minTime = items[i].start;
  	if(items[i].start>maxTime)
  		maxTime = items[i].start;
  	if(items[i].end>maxTime)
  		maxTime = items[i].end;
  }
  // Configuration for the Timeline
  var options = {
  	min:minTime, max:maxTime+1,
  	showMajorLabels : false
  	,orientation : {axis:'both'} // 'top' looks fine too
  	,timeAxis : {scale:'millisecond',step:1}
  	,format : {minorLabels:{millisecond:'x'}}
  };
  // Create a Timeline
  // var timeline = new vis.Timeline(container, items, options);
  var timeline = new vis.Timeline(container, items, groups, options);
  timeline.on('select', function (properties) {
  		id = properties['items'];
  		p = items[id].p;
  		if (typeof p != 'undefined'){
  			// select precedents
  			p.push(id);
  			timeline.setSelection(p, {focus: focus.checked});
  		}
  		// document.getElementById('log').innerHTML=""+id+" "+items[id].content+" "+items[id].p;
    });
    
</script>
</body>
</html>